# cron 表达式

通过对 cron 表达式的修改，定时执行脚本

## 学习 cron 表达式的基本写法

1、cron 6位表达式

![image](https://raw.githubusercontent.com/chiupam/tutorial-image/master/Loon/Plus/cron_6.png)

- 从左到右依次

  - 第一位代表 `秒` ，只允许写 `0-59` 之间的数字
  
  - 第二位代表 `分` ，只允许写 `0-59` 之间的数字，不允许出现 `60`
  
  - 第三位代表 `时` ,只允许写 `0-23` 之间的数字，凌晨12时不允许写 `24`
  
  - 第四位代表 `日` ，只允许写 `1-31` 之间的数字
  
  - 第五位代表 `月` ，只允许写 `1-12` 之间的数字
  
  - 第六位代表 `星期` ，只允许写 `0-7` 之间的数字， `0` 和 `7` 都代表周日
  
2、cron 5位表达式

![image](https://raw.githubusercontent.com/chiupam/tutorial-image/master/Loon/Plus/cron_5.png)

- 从左到右依次
  
  - 第一位代表 `分` ，只允许写 `0-59` 之间的数字，不允许出现 `60`
  
  - 第二位代表 `时` ,只允许写 `0-23` 之间的数字，凌晨12点时不允许写 `24`
  
  - 第三位代表 `日` ，只允许写 `1-31` 之间的数字
  
  - 第四位代表 `月` ，只允许写 `1-12` 之间的数字
  
  - 第五位代表 `星期` ，只允许写 `0-7` 之间的数字， `0` 和 `7` 都代表周日
  
3、特殊字符

- `,` 代表 `和` ，如 `0 0,12,18 * * *` 代表 `每日0时、12时、18时执行一次`

- `*` 代表 `任何值` ，如 `* * * * *` 代表 `每分钟执行一次`

- `/` 代表 `每` ，如 `10-20/5 * * * *` 代表 `每小时里的第10-20分，每5分钟执行一次，即第10分钟、第15分钟、第20分钟`

  - 特殊情况：想表达每1分钟执行一次时，可以将 `/1` 省略不写

4、错误示范

- `60 * * * * *` 理想：每分钟第60秒执行一次。实际：无法执行。原因：`秒` 位不允许写 `60` 。正确表达： `0 * * * * *`

- `* 12-18 * * *` 理想：每日12时-18时第0分执行一次。实际：每日12时-18时每1分钟执行一次。原因：第一位是 `*` 。正确表达： `0 12-18 * * *`

  - `* 12-18 * * *` 上榜原因：群友经典示范，集体眼瞎系列

- `0 18-12 * * *` 理想：每日18时-次日12时第0分钟执行一次。实际：无法执行。原因：不可跨时间刻度。正确表达： `0 18-23,0-12 * * *`

- `*/90 * * * * *` 理想：每90秒执行一次。实际：每60秒执行一次。原因：`秒` 只有 `60` ，大于 `60` 时按 `60` 计算。正确表达：目前无法做到，推荐曲线救国

# 参考

- [crontab执行时间计算 - 在线工具](https://tool.lu/crontab/)
